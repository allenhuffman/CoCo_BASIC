1DIMA(6,6):PCLEAR1:ONBRKGOTO6000:POKE&HE010,&H26:POKE&HE011,&H02:POKE&HE012,&H32:POKE&HE013,&H62:POKE&HE014,&H10:POKE&HE015,&H8E:POKE&HE016,&HFE:POKE&HE017,&H19:POKE&HE018,&H39:POKE&HEF68,&HBD:POKE&HEF69,&HE0
2POKE&HEF6A,&H10:POKE&HEF6B,&H12:POKE&HF015,&H21:POKE&HFFD9,0:HSCREEN2:PALETTE0,0:PALETTE1,63:PALETTE2,22
10HCLS0:HCOLOR5:HPRINT(0,0),"Lights Out Puzzle":HPRINT(27,0),"by Rick Adams":R=RND(-TIMER):M=0:N=13:GOSUB1000:GOSUB2000:GOSUB4000:I=1:J=1
100GOSUB3000:IFBUTTON(0)<>0 THENSOUND1,1:GOSUB7000
101IFN>0 THENGOTO100
102GOSUB5000:GOTO10
1000FORX=1TO5:FORY=1TO5:A(X,Y)=0:NEXT:NEXT:RETURN
2000FORK=1TO5:I=INT(5*RND(0)+1):J=INT(5*RND(0)+1):GOSUB8000:NEXT:RETURN
3000T=(T+1)AND7:X=117+(I-1)*16:Y=53+(J-1)*16:IFT AND4 THENHLINE(X,Y)-(X+12,Y+12),PRESET,B ELSEHCOLOR1:HLINE(X,Y)-(X+12,Y+12),PSET,B:I=INT(JOYSTK(0)/14)+1:J=INT(JOYSTK(1)/14)+1
3001RETURN
4000N=0:FORJ0=1TO5:Y=53+(J0-1)*16:FORI0=1TO5:X=117+(I0-1)*16:C=HPOINT(X,Y):IFC<>1 THENHCOLOR1:HLINE(X,Y)-(X+12,Y+12),PSET,B
4001C=HPOINT(X+1,Y+1):IFA(I0,J0)<0AND C<>2 THENHCOLOR2:HLINE(X+1,Y+1)-(X+11,Y+11),PSET,BF
4002IFA(I0,J0)=0AND C<>0 THENHLINE(X+1,Y+1)-(X+11,Y+11),PRESET,BF
4003IFA(I0,J0)<0 THENN=N+1
4004NEXT:NEXT:HCOLOR1:HPRINT(0,3),STR$(N)+" lights,"+STR$(M)+" moves. (0 lights to win!)    ":M=M+1:RETURN
5000HCOLOR1:HPRINT(16,20),"You win!":HCOLOR5:HPRINT(6,24),"Press any key to play again":EXEC&HADFB:C$=INKEY$:RETURN
6000POKE&H71,0:EXEC&H8C1B
7000GOSUB8000:GOSUB4000:RETURN
8000A(I,J)=NOT A(I,J):A(I-1,J)=NOT A(I-1,J):A(I+1,J)=NOT A(I+1,J):A(I,J-1)=NOT A(I,J-1):A(I,J+1)=NOT A(I,J+1):RETURN
